(function(t){function e(e){for(var n,o,i=e[0],s=e[1],c=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(l,o)&&l[o]&&p.push(l[o][0]),l[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,i=1;i<a.length;i++){var s=a[i];0!==l[s]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},l={app:0},r=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=s;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0415":function(t,e,a){},"0e14":function(t,e,a){},"21ee":function(t,e,a){"use strict";var n=a("e00f"),l=a.n(n);l.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],o={name:"App"},i=o,s=a("2877"),c=Object(s["a"])(i,l,r,!1,null,null,null),u=c.exports,d=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"login-heard"}),a("el-form",{ref:"login-form",staticClass:"login-form",attrs:{model:t.user,rules:t.formRules}},[a("el-form-item",{attrs:{prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.user.mobile,callback:function(e){t.$set(t.user,"mobile",e)},expression:"user.mobile"}})],1),a("el-form-item",{attrs:{prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:t.user.code,callback:function(e){t.$set(t.user,"code",e)},expression:"user.code"}})],1),a("el-form-item",{attrs:{prop:"agree"}},[a("el-checkbox",{model:{value:t.user.agree,callback:function(e){t.$set(t.user,"agree",e)},expression:"user.agree"}},[t._v("我已阅读并同意用户协议和隐私条款")])],1),a("el-form-item",[a("el-button",{staticClass:"login-btn",attrs:{loading:t.loginLoading,type:"primary"},on:{click:t.onlogin}},[t._v("登录")])],1)],1)],1)},m=[],f=(a("d3b7"),a("bc3a")),h=a.n(f),g=a("d604"),v=a.n(g),b=h.a.create({baseURL:"http://ttapi.research.itcast.cn/",transformResponse:[function(t){try{return v.a.parse(t)}catch(e){return t}}]});b.interceptors.request.use((function(t){var e=JSON.parse(window.localStorage.getItem("token"));return e&&(t.headers.Authorization="Bearer ".concat(e)),t}),(function(t){return Promise.reject(t)}));var _=b,y=function(t){return _({method:"POST",url:"/mp/v1_0/authorizations",data:t})},w=function(t){return _({method:"GET",url:"/mp/v1_0/user/profile"})},x={name:"loginIndex",data:function(){return{user:{mobile:"",code:"",agree:!1},loginLoading:!1,formRules:{mobile:[{required:!0,message:"请输入手机号码",trigger:"change"},{pattern:/^1[3|5|8|7|9]\d{9}$/,message:"请输入正确的手机号码",trigger:"change"}],code:[{required:!0,message:"验证码不能为空",trigger:"change"},{pattern:/^\d{6}$/,message:"请输入正确的验证码",trigger:"change"}],agree:[{validator:function(t,e,a){e?a():a(new Error("请同意协议"))},message:"请同意协议",trigger:blur}]}}},methods:{onlogin:function(){var t=this;this.$refs["login-form"].validate((function(e){e&&t.loginIn()}))},loginIn:function(){var t=this;y(this.user).then((function(e){t.$message({message:"登录成功",type:"success"}),t.loginLoading=!1,t.$router.push({name:"home"}),window.localStorage.setItem("token",JSON.stringify(e.data.data.token))})).catch((function(e){console.log("登录失败",e),t.$message.error("登录失败,手机号或验证码错误"),t.loginLoading=!1}))}}},C=x,k=(a("793e"),Object(s["a"])(C,p,m,!1,null,null,null)),$=k.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home-container"},[t._v("首页")])},O=[],j={name:"HomeIndex",components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},P=j,A=Object(s["a"])(P,S,O,!1,null,"3ef5e8f5",null),E=A.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"layout-container"},[a("el-aside",{staticClass:"aside",attrs:{width:"auto"}},[a("app-aside",{staticClass:"aside-menu",attrs:{"is-collapse":t.isCollapse}})],1),a("el-container",[a("el-header",{staticClass:"header"},[a("div",[a("i",{class:{"el-icon-s-fold":t.isCollapse,"el-icon-s-unfold":!t.isCollapse},on:{click:function(e){t.isCollapse=!t.isCollapse}}}),a("span",[t._v("江苏传智播客科技教育有限公司")])]),a("el-dropdown",[a("div",{staticClass:"avatar-wrap"},[a("img",{staticClass:"avatar",attrs:{src:t.user.photo,alt:""}}),a("span",[t._v(t._s(t.user.name))]),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"a"}},[a("i",{staticClass:"el-icon-s-tools"}),t._v(" 个人设置")]),a("el-dropdown-item",{attrs:{command:"b"},nativeOn:{click:function(e){return t.loginout(e)}}},[a("i",{staticClass:"el-icon-unlock"}),t._v(" 退出登录")])],1)],1)],1),a("el-main",{staticClass:"main"},[a("router-view")],1)],1)],1)},T=[],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"img-logo"}),a("el-menu",{attrs:{"default-active":"/","background-color":"#002033","text-color":"#fff","active-text-color":"#ffd04b",router:"",collapse:t.isCollapse}},[a("el-menu-item",{attrs:{index:"/"}},[a("i",{staticClass:"el-icon-s-home"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("首页")])]),a("el-menu-item",{attrs:{index:"/article"}},[a("i",{staticClass:"el-icon-document"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("内容管理")])]),a("el-menu-item",{attrs:{index:"/image"}},[a("i",{staticClass:"el-icon-picture"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("素材管理")])]),a("el-menu-item",{attrs:{index:"/publish"}},[a("i",{staticClass:"el-icon-s-promotion"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("发布文章")])]),a("el-menu-item",{attrs:{index:"/comment"}},[a("i",{staticClass:"el-icon-chat-dot-round"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("评论管理")])]),a("el-menu-item",{attrs:{index:"/fans"}},[a("i",{staticClass:"el-icon-present"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("粉丝管理")])]),a("el-menu-item",{attrs:{index:"/setting"}},[a("i",{staticClass:"el-icon-setting"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("个人设置")])])],1)],1)},z=[],q={name:"AppAside",components:{},props:["is-collapse"],data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},M=q,L=(a("5b23"),Object(s["a"])(M,D,z,!1,null,"7452427b",null)),B=L.exports,J={name:"LayoutIndex",components:{AppAside:B},props:{},data:function(){return{user:{},isCollapse:!1}},computed:{},watch:{},created:function(){this.loadUserProfile()},mounted:function(){},methods:{loadUserProfile:function(){var t=this;w().then((function(e){t.user=e.data.data}))},loginout:function(){var t=this;this.$confirm("请确认是否退出","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message({type:"success",message:"退出成功!"}),window.localStorage.removeItem("token"),t.$router.push("/login")})).catch((function(){t.$message({type:"info",message:"已取消退出"})}))}}},G=J,N=(a("7c68"),Object(s["a"])(G,I,T,!1,null,"1d53e753",null)),R=N.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"article-container"},[a("el-card",{staticClass:"top-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("内容管理")])],1)],1),a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"50px",size:"small"}},[a("el-form-item",{attrs:{label:"状态:"}},[a("el-radio-group",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("el-radio",{attrs:{label:null}},[t._v("全部")]),a("el-radio",{attrs:{label:0}},[t._v("草稿")]),a("el-radio",{attrs:{label:1}},[t._v("待审核")]),a("el-radio",{attrs:{label:2}},[t._v("审核通过")]),a("el-radio",{attrs:{label:3}},[t._v("审核失败")]),a("el-radio",{attrs:{label:4}},[t._v("已删除")])],1)],1),a("el-form-item",{attrs:{label:"频道"}},[a("el-select",{attrs:{placeholder:"请选择频道"},model:{value:t.channelId,callback:function(e){t.channelId=e},expression:"channelId"}},[a("el-option",{attrs:{label:"全部",value:null}}),t._l(t.channels,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],2)],1),a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["12:00:00"],format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}})],1),a("el-form-item",[a("el-button",{attrs:{disabled:t.loading,type:"primary"},on:{click:function(e){return t.loadArticle(1)}}},[t._v("筛选")])],1)],1)],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t._v(" 根据筛选条件共查询到 "+t._s(t.total_count)+" 条结果： ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"article-list",staticStyle:{width:"100%"},attrs:{data:t.article,stripe:"",size:"small"}},[a("el-table-column",{attrs:{prop:"date",label:"封面"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.cover.images[0],fit:"cover",lazy:""}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])]}}])}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.articleStatus[e.row.status].type}},[t._v(" "+t._s(t.articleStatus[e.row.status].text)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"pubdate",label:"发布时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",circle:"",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.$router.push("/publish?id="+e.row.id)}}}),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.onDeleteArticle(e.row.id)}}})]}}])})],1),a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total_count,background:"",disabled:t.loading,"page-size":t.pageSize,"current-page":t.page},on:{"current-change":t.onCurrentChange,"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)],1)},H=[],F=(a("25f0"),function(t){return _({method:"GET",url:"/mp/v1_0/articles",params:t})}),K=function(){return _({method:"GET",url:"/mp/v1_0/channels"})},Q=function(t){return _({method:"DELETE",url:"/mp/v1_0/articles/".concat(t)})},V=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _({method:"POST",url:"/mp/v1_0/articles",params:{draft:e},data:t})},W=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _({method:"PUT",url:"/mp/v1_0/articles/".concat(t),params:{draft:a},data:e})},X=function(t){return _({method:"GET",url:"/mp/v1_0/articles/".concat(t)})},Y={name:"ArticleIndex",components:{},props:{},data:function(){return{form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},article:[],articleStatus:[{status:0,text:"草稿",type:"info"},{status:1,text:"待审核",type:""},{status:2,text:"审核通过",type:"success"},{status:3,text:"审核失败",type:"warning"},{status:4,text:"已删除",type:"danger"}],total_count:0,pageSize:10,status:null,channels:[],channelId:null,rangeDate:null,loading:!0,page:1}},computed:{},watch:{},created:function(){this.loadArticle(1),this.loadChannels()},mounted:function(){},methods:{loadArticle:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,F({page:e,per_page:this.pageSize,status:this.status,channel_id:this.channelId,begin_pubdate:this.rangeDate?this.rangeDate[0]:null,end_pubdate:this.rangeDate?this.rangeDate[1]:null}).then((function(e){t.article=e.data.data.results,t.total_count=e.data.data.total_count,t.loading=!1}))},loadChannels:function(){var t=this;K().then((function(e){t.channels=e.data.data.channels}))},onCurrentChange:function(t){this.loadArticle(t)},onDeleteArticle:function(t){var e=this;this.$confirm("是否确认删除?","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Q(t.toString()).then((function(t){e.loadArticle(e.page)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},Z=Y,tt=(a("21ee"),Object(s["a"])(Z,U,H,!1,null,"c96c64f2",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"publish-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v(t._s(t.$route.query.id?"修改文章":"发布文章"))])],1)],1),a("el-form",{ref:"form",attrs:{model:t.article,"label-width":"40px"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),a("el-form-item",{attrs:{label:"内容"}},[a("el-tiptap",{attrs:{extensions:t.extensions,height:"300",placeholder:"请输入文章内容"},model:{value:t.article.content,callback:function(e){t.$set(t.article,"content",e)},expression:"article.content"}})],1),a("el-form-item",{attrs:{label:"封面"}},[a("el-radio-group",{model:{value:t.article.cover.type,callback:function(e){t.$set(t.article.cover,"type",e)},expression:"article.cover.type"}},[a("el-radio",{attrs:{label:1}},[t._v("单图")]),a("el-radio",{attrs:{label:3}},[t._v("三图")]),a("el-radio",{attrs:{label:0}},[t._v("无图")]),a("el-radio",{attrs:{label:-1}},[t._v("自动")])],1)],1),a("el-form-item",{attrs:{label:"频道"}},[a("el-select",{attrs:{placeholder:"请选择频道"},model:{value:t.article.channel_id,callback:function(e){t.$set(t.article,"channel_id",e)},expression:"article.channel_id"}},t._l(t.channels,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onPublish(!1)}}},[t._v(t._s(t.$route.query.id?"修改":"发布"))]),a("el-button",{on:{click:function(e){return t.onPublish(!0)}}},[t._v("存入草稿")])],1)],1)],1)],1)},nt=[],lt=a("4ccc"),rt=(a("7eef"),{name:"PublishIndex",components:{"el-tiptap":lt["f"]},props:{},data:function(){return{channels:[],channel_id:null,article:{title:"",content:"",cover:{type:0,images:[]}},extensions:[new lt["e"],new lt["p"],new lt["m"],new lt["h"]({level:5}),new lt["b"]({bubble:!0}),new lt["i"]({}),new lt["r"],new lt["j"],new lt["o"],new lt["q"],new lt["a"],new lt["k"],new lt["c"],new lt["l"],new lt["d"],new lt["g"],new lt["n"]]}},computed:{},watch:{},created:function(){this.loadChannels(),this.$route.query.id&&this.upDataArticle()},mounted:function(){},methods:{onPublish:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.$route.query.id;a?W(a,this.article,e).then((function(a){t.$message({message:"".concat(e?"存入草稿":"修改","成功"),type:"success"}),t.$router.push("/article")})):V(this.article,e).then((function(a){t.$message({message:"".concat(e?"存入草稿":"发布","成功"),type:"success"}),t.$router.push("/article")}))},loadChannels:function(){var t=this;K().then((function(e){t.channels=e.data.data.channels}))},upDataArticle:function(){var t=this;X(this.$route.query.id).then((function(e){t.article=e.data.data}))}}}),ot=rt,it=Object(s["a"])(ot,at,nt,!1,null,"1e1097ec",null),st=it.exports;n["default"].use(d["a"]);var ct=[{path:"/login",name:"login",component:$},{path:"/",component:R,children:[{path:"",name:"home",component:E},{path:"/article",name:"article",component:et},{path:"/publish",name:"publish",component:st}]}],ut=new d["a"]({routes:ct});ut.beforeEach((function(t,e,a){var n=JSON.parse(window.localStorage.getItem("token"));"/login"!==t.path?n?a():a("/login"):a()}));var dt=ut,pt=a("5c96"),mt=a.n(pt);a("0fae"),a("a4b1");n["default"].use(mt.a),n["default"].config.productionTip=!1,new n["default"]({router:dt,render:function(t){return t(u)}}).$mount("#app")},"5b23":function(t,e,a){"use strict";var n=a("0e14"),l=a.n(n);l.a},"793e":function(t,e,a){"use strict";var n=a("a8ff"),l=a.n(n);l.a},"7c68":function(t,e,a){"use strict";var n=a("0415"),l=a.n(n);l.a},a4b1:function(t,e,a){},a8ff:function(t,e,a){},e00f:function(t,e,a){}});
//# sourceMappingURL=app.ae4cc852.js.map